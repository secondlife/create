---
/**
 * SLuaConstant component - Displays SLua constant documentation
 *
 * This component loads constant data from lsl_definitions.yaml at build time.
 * It only requires the constant name as a prop.
 */

import ConstantReference from './ConstantReference.astro';
import { getConstant } from '../utils/lsl-definitions';
import { toLuauType } from '../utils/slua.ts';

export interface Props {
  name: string;
}

const { name } = Astro.props;

// Load constant definition from YAML
const constantDef = getConstant(name);

if (!constantDef) {
  throw new Error(`Constant "${name}" not found in lsl_definitions.yaml`);
}

// Convert LSL type to Luau type
const luauType = toLuauType(constantDef.type);
---

<ConstantReference
  name={name}
  type={luauType}
  value={constantDef.value}
  tooltip={constantDef.tooltip}
  language="luau"
  className="constant-reference slua-constant-reference"
/>
