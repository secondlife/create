---
/**
 * ConstantReference component - Shared base for constant documentation
 *
 * This component provides the core rendering logic for constant reference pages.
 * Language-specific components (LSLConstant, SLuaConstant) use this as their base.
 */

import { Code } from '@astrojs/starlight/components';
import '../styles/function-reference.css';

export interface ConstantReference {
  name: string;
  tooltip: string;
  type: string;
  value: string;
  /** The programming language for syntax highlighting */
  language: 'lsl' | 'luau';
  /** CSS class name for the root element */
  className?: string;
}

export interface Props extends ConstantReference {}

const {
  name,
  tooltip,
  type,
  value,
  language,
  className = 'constant-reference'
} = Astro.props;

// Split tooltip into paragraphs by newlines
const tooltipParagraphs = tooltip.split('\n').filter((p: string) => p.trim());

// Format the constant declaration based on language
const declaration = language === 'lsl'
  ? `${type} ${name} = ${value};`
  : `local ${name}: ${type} = ${value}`;
---

<div class={className}>
  <div class="function-signature">
    <Code code={declaration} lang={language} />
  </div>

  <div class="function-description">
    {tooltipParagraphs.map((paragraph: string) => (
      <p>{paragraph}</p>
    ))}
  </div>

  <details class="function-metadata-details">
    <summary>Technical Details</summary>
    <div class="function-metadata">
      <ul>
        <li><strong>Type:</strong> <code>{type}</code></li>
        <li><strong>Value:</strong> <code>{value}</code></li>
      </ul>
    </div>
  </details>
</div>
